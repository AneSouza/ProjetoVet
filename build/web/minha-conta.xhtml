<?xml version="1.0"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">


    <ui:composition template="_template2.xhtml">

        <ui:define name="titulo">
            <title>Clínica Veterinária</title>
        </ui:define>

        <ui:define name="conteudo">
            <div class="container">

                <div class="page-header">
                    <br></br>
                    <h:messages id="msg" class="fonteSansHelvetica alert alert-danger"/>
                </div>

                <h:form>

                    <div class="row fonteSansHelvetica">
                        <div class="col-sm-10" style="background-color: #008B8B; padding: 20px">
                            
                            <font color ="#FFF"><h3 align="center">Altere Seus dados</h3></font>

                            <font color ="#3b5998" align="center">
                                <h:dataTable  style="background-color: #FFF" class="table table-bordered"  
                                              value = "#{pessoaController.user}" var="user" >

                                    <h:column>
                                        <f:facet name="header">Nome</f:facet>
                                        <h:outputText value="#{user.nome} "/>
                                    </h:column>

                                    <h:column>
                                        <f:facet name="header">CPF</f:facet>
                                        <h:outputText value="#{user.cpf}"/>
                                    </h:column>

                                    <h:column>
                                        <f:facet name="header">Login</f:facet>
                                        <h:outputText value="#{user.login}"/>
                                    </h:column>

                                    <h:column>
                                        <f:facet name="header">Telefone</f:facet>
                                        <h:outputText value="#{user.telefone}"/>
                                    </h:column>


                                    <h:column>
                                        <f:facet name="header">Alterar</f:facet>
                                        <h:commandButton type="submit" class="btn btn-success btn-sm" value="Alterar Dados" 
                                                         action="#{pessoaController.atualizaPessoa()}">
                                        </h:commandButton>
                                    </h:column>


                                    <br/>
                                </h:dataTable>
                            </font>
                        </div>
                        
                    </div>
                </h:form>
                <br></br>

                <h:panelGroup rendered="#{pessoaController.mostrar()}"> 

                    <font color ="#FFF">

                        <h:form >
                            <div class="pager"></div>  <!-- Formulario editar dados pessoa -->
                            <div class="col-sm-5" style="background-color: #008B8B; padding: 20px">

                                <div class="form-group col-md-6">
                                    <h:outputText value="Login" for="login"/>
                                    <h:inputText id="login"  class="form-control" value="#{pessoaController.pessoa.login}"
                                                 required="true" requiredMessage="Login obrigatório">
                                        <f:ajax event ="blur" render = "msg"/>
                                    </h:inputText>
                                </div>

                                <div class="form-group col-md-6">
                                    <h:outputText value="Senha" for="senha"/>
                                    <h:inputText id="senha"  class="form-control" value="#{pessoaController.pessoa.senha}"
                                                 pt:type="password" pt:required="" pt:placeholder="Máximo 25 caracteres" pt:maxlength="25"
                                                 required="true" requiredMessage="Senha obrigatória">
                                        <f:ajax event ="blur" render = "msg"/>
                                    </h:inputText>
                                </div>

                                <div class="form-group col-md-6">
                                    <h:outputText value="Nome" for="nome"/>
                                    <h:inputText id="nome"  class="form-control" value="#{pessoaController.pessoa.nome}"
                                                 required="true" requiredMessage="Nome obrigatório">
                                        <f:ajax event ="blur" render = "msg"/>
                                    </h:inputText>
                                </div>


                                <div class="form-group col-md-6">
                                    <h:outputText value="CPF" for="cpf"/>
                                    <h:inputText id="cpf" value="#{pessoaController.pessoa.cpf}" validatorMessage="Entre com um CPF valido." class="form-control">
                                        <f:validateRegex pattern="([0-9]{2}[\.]?[0-9]{3}[\.]?[0-9]{3}[\/]?[0-9]{4}[-]?[0-9]{2})|([0-9]{3}[\.]?[0-9]{3}[\.]?[0-9]{3}[-]?[0-9]{2})"/>
                                        <f:ajax event="blur" render="msg"/>
                                    </h:inputText>
                                </div>



                                <div class="form-group col-md-6">
                                    <h:outputText value="Telefone" for="telefone"/>
                                    <h:inputText id="telefone"  class="form-control" value="#{pessoaController.pessoa.telefone}" pt:required=""/>

                                </div>



                                <h:commandButton type="submit" class="btn btn-success btn-block" value="Alterar" action="#{pessoaController.alterar}"/>            
                            </div>
                        </h:form>
                    </font>
                </h:panelGroup>
                <br/>

            </div>


        </ui:define>

    </ui:composition>	    

</html>